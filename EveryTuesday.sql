--GET ALL THE TUESDAY OF A YEAR

/*
--https://msbiskills.com/2015/10/21/sql-puzzle-find-every-3rd-tuesday-with-in-a-year/
*/

WITH CTE_DT AS
(
SELECT YEAR('01/01/2012') YR,MONTH('01/01/2012') MTH, 1 AS INC,DATEADD(DAY,0,'01/01/2012') DM
UNION ALL
SELECT YEAR('01/01/2012') YR,MONTH(DATEADD(DAY,INC,'01/01/2012')) MTH,INC+1 INC,DATEADD(DAY,INC,'01/01/2012') DM
FROM CTE_DT 
WHERE MONTH(DATEADD(DAY,INC,'01/01/2012'))<=12 and YEAR(DATEADD(DAY,INC,'01/01/2012'))='2012' 
)


,CTE_WK AS(
SELECT YR,MTH,DM,DATENAME(DW,DM) DW,(DATEPART(day,DM)-1)/7 + 1 WKCNT,(DATEPART(day,DM)) DP
FROM CTE_DT )


SELECT DM,DP FROM CTE_WK
WHERE WKCNT=3 AND DW='Tuesday'
OPTION (MAXRECURSION 0)


